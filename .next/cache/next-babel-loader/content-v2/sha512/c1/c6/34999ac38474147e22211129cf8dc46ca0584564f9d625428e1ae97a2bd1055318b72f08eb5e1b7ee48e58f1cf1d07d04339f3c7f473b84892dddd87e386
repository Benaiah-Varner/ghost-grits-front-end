{"ast":null,"code":"import _regeneratorRuntime from \"/Users/benaiahvarner/Documents/Ghost-Grits/frontendd/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _asyncToGenerator from \"/Users/benaiahvarner/Documents/Ghost-Grits/frontendd/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/Users/benaiahvarner/Documents/Ghost-Grits/frontendd/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/benaiahvarner/Documents/Ghost-Grits/frontendd/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/Users/benaiahvarner/Documents/Ghost-Grits/frontendd/components/Checkout.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useState } from 'react';\nimport { CREATE_ORDER, CREATE_FIXED_ORDER_ITEM, CREATE_CUSTOM_ORDER_ITEM, DELETE_CUSTOM_ITEMS, DELETE_FIXED_ITEMS } from './queries/orderQuerie';\nimport { useMutation } from '@apollo/client';\nimport { loadStripe } from '@stripe/stripe-js';\nimport { Elements, CardElement, useStripe, useElements } from '@stripe/react-stripe-js';\nimport { useRouter } from 'next/router';\nimport { CheckoutStyled } from './styles/CheckoutStyled';\nimport { calcTotalPrice } from '../lib/calcTotalPrice';\nimport Select from 'react-select';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faClock } from '@fortawesome/free-solid-svg-icons';\nimport { faCalendar } from '@fortawesome/free-regular-svg-icons';\nimport { useCart } from '../lib/cartState';\nvar stripeLib = loadStripe(process.env.NEXT_PUBLIC_STRIPE_KEY);\n\nvar CheckoutForm = function CheckoutForm(_ref) {\n  _s();\n\n  var _fixedItems$allFoodCa2, _customItems$allSalad2;\n\n  var fixedItems = _ref.fixedItems,\n      customItems = _ref.customItems;\n\n  var _useCart = useCart(),\n      closeCart = _useCart.closeCart;\n\n  var _useState = useState(),\n      error = _useState[0],\n      setError = _useState[1];\n\n  var _useState2 = useState(false),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = useState({\n    firstName: '',\n    lastName: '',\n    email: ''\n  }),\n      orderForm = _useState3[0],\n      setOrderForm = _useState3[1];\n\n  var _useState4 = useState(false),\n      checkoutOpen = _useState4[0],\n      setCheckoutOpen = _useState4[1];\n\n  var _useMutation = useMutation(DELETE_FIXED_ITEMS),\n      _useMutation2 = _slicedToArray(_useMutation, 1),\n      deleteFixedItems = _useMutation2[0];\n\n  var _useMutation3 = useMutation(DELETE_CUSTOM_ITEMS),\n      _useMutation4 = _slicedToArray(_useMutation3, 1),\n      deleteCustomItems = _useMutation4[0];\n\n  var _useMutation5 = useMutation(CREATE_CUSTOM_ORDER_ITEM),\n      _useMutation6 = _slicedToArray(_useMutation5, 1),\n      createCustomOrderItem = _useMutation6[0];\n\n  var _useMutation7 = useMutation(CREATE_FIXED_ORDER_ITEM),\n      _useMutation8 = _slicedToArray(_useMutation7, 1),\n      createFixedOrderItem = _useMutation8[0];\n\n  var _useMutation9 = useMutation(CREATE_ORDER),\n      _useMutation10 = _slicedToArray(_useMutation9, 1),\n      createOrder = _useMutation10[0];\n\n  var router = useRouter();\n  var stripe = useStripe();\n  var elements = useElements();\n\n  var handleChange = function handleChange(e) {\n    setOrderForm(_objectSpread(_objectSpread({}, orderForm), {}, _defineProperty({}, e.target.name, e.target.value)));\n  };\n\n  var fixedPrices = [];\n\n  var foodPrice = function foodPrice() {\n    var _fixedItems$allFoodCa;\n\n    fixedItems === null || fixedItems === void 0 ? void 0 : (_fixedItems$allFoodCa = fixedItems.allFoodCartItems) === null || _fixedItems$allFoodCa === void 0 ? void 0 : _fixedItems$allFoodCa.map(function (item) {\n      fixedPrices.push(item.food.price);\n    });\n    return fixedPrices;\n  };\n\n  var customPrices = [];\n\n  var saladPrice = function saladPrice() {\n    var _customItems$allSalad;\n\n    customItems === null || customItems === void 0 ? void 0 : (_customItems$allSalad = customItems.allSaladCartItems) === null || _customItems$allSalad === void 0 ? void 0 : _customItems$allSalad.map(function (item) {\n      customPrices.push(item.salad.price);\n    });\n    return customPrices;\n  };\n\n  var fixedFoodPrice = foodPrice().reduce(function (tally, item) {\n    return tally + item;\n  }, 0);\n  var customFoodPrice = saladPrice().reduce(function (tally, item) {\n    return tally + item;\n  }, 0);\n  var fixedOrderItem = fixedItems === null || fixedItems === void 0 ? void 0 : (_fixedItems$allFoodCa2 = fixedItems.allFoodCartItems) === null || _fixedItems$allFoodCa2 === void 0 ? void 0 : _fixedItems$allFoodCa2.map(function (item, key) {\n    var orderItem = {\n      data: {\n        name: item.food.name,\n        description: item.food.description\n      }\n    };\n    return orderItem;\n  });\n  var customOrderItem = customItems === null || customItems === void 0 ? void 0 : (_customItems$allSalad2 = customItems.allSaladCartItems) === null || _customItems$allSalad2 === void 0 ? void 0 : _customItems$allSalad2.map(function (item, key) {\n    var orderItem = {\n      data: {\n        name: item.salad.name,\n        description: item.salad.description,\n        choice_of_dressing: item.salad.choice_of_dressing,\n        choice_of_two_toppings: item.salad.choice_of_two_toppings\n      }\n    };\n    return orderItem;\n  });\n\n  function convertFixedItems() {\n    return _convertFixedItems.apply(this, arguments);\n  }\n\n  function _convertFixedItems() {\n    _convertFixedItems = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var fixedOrder;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return createFixedOrderItem({\n                variables: {\n                  fixedItems: fixedOrderItem\n                }\n              });\n\n            case 2:\n              fixedOrder = _context.sent;\n              return _context.abrupt(\"return\", fixedOrder);\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _convertFixedItems.apply(this, arguments);\n  }\n\n  function convertCustomItems() {\n    return _convertCustomItems.apply(this, arguments);\n  }\n\n  function _convertCustomItems() {\n    _convertCustomItems = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var customOrder;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return createCustomOrderItem({\n                variables: {\n                  customItems: customOrderItem\n                }\n              });\n\n            case 2:\n              customOrder = _context2.sent;\n              return _context2.abrupt(\"return\", customOrder);\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return _convertCustomItems.apply(this, arguments);\n  }\n\n  function handleSubmit(_x) {\n    return _handleSubmit.apply(this, arguments);\n  }\n\n  function _handleSubmit() {\n    _handleSubmit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e) {\n      var _paymentMethod$card, _paymentMethod$card2, _paymentMethod$card3, _fixedOrder$createFix, _customOrder$createCu, _fixedItems$allFoodCa3, _customItems$allSalad3;\n\n      var _yield$stripe$createP, error, paymentMethod, charge, _yield$convertCustomI, customOrder, _yield$convertFixedIt, fixedOrder, customId, fixedId, _yield$createOrder, order, deleteCustom, deleteFixed;\n\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              e.preventDefault();\n              setLoading(true);\n              _context3.next = 4;\n              return stripe.createPaymentMethod({\n                type: 'card',\n                card: elements.getElement(CardElement)\n              });\n\n            case 4:\n              _yield$stripe$createP = _context3.sent;\n              error = _yield$stripe$createP.error;\n              paymentMethod = _yield$stripe$createP.paymentMethod;\n\n              if (error) {\n                setError(error);\n              }\n\n              charge = \"Brand: \".concat(paymentMethod === null || paymentMethod === void 0 ? void 0 : (_paymentMethod$card = paymentMethod.card) === null || _paymentMethod$card === void 0 ? void 0 : _paymentMethod$card.brand, \", Type: \").concat(paymentMethod === null || paymentMethod === void 0 ? void 0 : (_paymentMethod$card2 = paymentMethod.card) === null || _paymentMethod$card2 === void 0 ? void 0 : _paymentMethod$card2.funding, \", Last 4 digits: \").concat(paymentMethod === null || paymentMethod === void 0 ? void 0 : (_paymentMethod$card3 = paymentMethod.card) === null || _paymentMethod$card3 === void 0 ? void 0 : _paymentMethod$card3.last4);\n              _context3.next = 11;\n              return convertCustomItems();\n\n            case 11:\n              _yield$convertCustomI = _context3.sent;\n              customOrder = _yield$convertCustomI.data;\n              _context3.next = 15;\n              return convertFixedItems();\n\n            case 15:\n              _yield$convertFixedIt = _context3.sent;\n              fixedOrder = _yield$convertFixedIt.data;\n              customId = [];\n              fixedId = [];\n              fixedOrder === null || fixedOrder === void 0 ? void 0 : (_fixedOrder$createFix = fixedOrder.createFixedOrderItems) === null || _fixedOrder$createFix === void 0 ? void 0 : _fixedOrder$createFix.map(function (item) {\n                fixedId.push({\n                  id: item.id\n                });\n              });\n              customOrder === null || customOrder === void 0 ? void 0 : (_customOrder$createCu = customOrder.createCustomOrderItems) === null || _customOrder$createCu === void 0 ? void 0 : _customOrder$createCu.map(function (item) {\n                customId.push({\n                  id: item.id\n                });\n              });\n              _context3.next = 23;\n              return createOrder({\n                variables: {\n                  fixedItems: fixedId,\n                  customItems: customId,\n                  firstName: orderForm.firstName,\n                  lastName: orderForm.lastName,\n                  email: orderForm.email,\n                  charge: charge,\n                  total: fixedFoodPrice + customFoodPrice\n                }\n              });\n\n            case 23:\n              _yield$createOrder = _context3.sent;\n              order = _yield$createOrder.data;\n              deleteCustom = [];\n              deleteFixed = [];\n              fixedItems === null || fixedItems === void 0 ? void 0 : (_fixedItems$allFoodCa3 = fixedItems.allFoodCartItems) === null || _fixedItems$allFoodCa3 === void 0 ? void 0 : _fixedItems$allFoodCa3.map(function (item) {\n                deleteFixed.push(item.id);\n              });\n              customItems === null || customItems === void 0 ? void 0 : (_customItems$allSalad3 = customItems.allSaladCartItems) === null || _customItems$allSalad3 === void 0 ? void 0 : _customItems$allSalad3.map(function (item) {\n                deleteCustom.push(item.id);\n              });\n              _context3.next = 31;\n              return deleteCustomItems({\n                variables: {\n                  ids: deleteCustom\n                }\n              });\n\n            case 31:\n              _context3.next = 33;\n              return deleteFixedItems({\n                variables: {\n                  ids: deleteFixed\n                }\n              });\n\n            case 33:\n              closeCart();\n              router.push(\"/order/\".concat(order.createOrder.id));\n\n            case 35:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n    return _handleSubmit.apply(this, arguments);\n  }\n\n  var options = [{\n    label: 'Tue, April 20th',\n    value: 'Tue, April 20th'\n  }, {\n    label: 'Wed, April 21st',\n    value: 'Wed, April 21th'\n  }, {\n    label: 'Thur, April 22nd',\n    value: 'Thur, April 22nd'\n  }, {\n    label: 'Fri, April 23rd',\n    value: 'Fri, April 23rd'\n  }];\n  var timeOptions = [{\n    label: '9:00 AM',\n    value: '9:00 AM'\n  }, {\n    label: '10:00 AM',\n    value: '10:00 AM'\n  }, {\n    label: '11:00 AM',\n    value: '11:00 AM'\n  }, {\n    label: '12:00 AM',\n    value: '12:00 AM'\n  }, {\n    label: '1:00 PM',\n    value: '1:00 PM'\n  }, {\n    label: '2:00 PM',\n    value: '2:00 PM'\n  }, {\n    label: '3:00 PM',\n    value: '3:00 PM'\n  }, {\n    label: '4:00 PM',\n    value: '4:00 PM'\n  }, {\n    label: '5:00 PM',\n    value: '5:00 PM'\n  }];\n  var customStyles = {\n    dropdownIndicator: function dropdownIndicator() {\n      return {\n        color: '#e5426c',\n        fontsize: '1rem'\n      };\n    },\n    option: function option() {\n      return {\n        color: '#e5426c'\n      };\n    },\n    control: function control() {\n      return {\n        border: '2px solid #e5426c',\n        borderRadius: '5px',\n        display: 'flex'\n      };\n    },\n    placeholder: function placeholder() {\n      return {\n        color: '#e5426c'\n      };\n    },\n    singleValue: function singleValue() {\n      return {\n        color: '#e5426c'\n      };\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(CheckoutStyled, {\n    open: checkoutOpen,\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: function onClick() {\n        return setCheckoutOpen(!checkoutOpen);\n      },\n      className: \"checkout-button\",\n      children: checkoutOpen ? 'Close' : 'Checkout'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"orderDet\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"total-date\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"total\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Order Subtotal:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"$\", calcTotalPrice(fixedItems, customItems)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"date-time\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"select-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                className: \"icon\",\n                icon: faCalendar\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 228,\n                columnNumber: 17\n              }, _this), \"Pick Up Date\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(Select, {\n              options: options,\n              styles: customStyles,\n              placeholder: 'Tue, April 20th'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"select-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                className: \"icon\",\n                icon: faClock\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 235,\n                columnNumber: 17\n              }, _this), \"Pick Up Time\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(Select, {\n              options: timeOptions,\n              styles: customStyles,\n              placeholder: '9:00 AM'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"names\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"First Name\",\n            type: \"text\",\n            name: \"firstName\",\n            onChange: handleChange,\n            value: orderForm.firstName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"Last Name\",\n            type: \"text\",\n            name: \"lastName\",\n            onChange: handleChange,\n            value: orderForm.lastName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"email\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"Email Address\",\n            type: \"email\",\n            name: \"email\",\n            onChange: handleChange,\n            value: orderForm.email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 11\n        }, _this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: error.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 21\n        }, _this), /*#__PURE__*/_jsxDEV(CardElement, {\n          className: \"card\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"checkout-button\",\n          children: \"Checkout Now\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 217,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(CheckoutForm, \"xofqgZPBW7H4PEWh/nfwj4rLuPw=\", false, function () {\n  return [useCart, useMutation, useMutation, useMutation, useMutation, useMutation, useRouter, useStripe, useElements];\n});\n\n_c = CheckoutForm;\n\nfunction Checkout(_ref2) {\n  var fixedItems = _ref2.fixedItems,\n      customItems = _ref2.customItems;\n  return /*#__PURE__*/_jsxDEV(Elements, {\n    stripe: stripeLib,\n    children: /*#__PURE__*/_jsxDEV(CheckoutForm, {\n      fixedItems: fixedItems,\n      customItems: customItems\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 279,\n    columnNumber: 5\n  }, this);\n}\n\n_c2 = Checkout;\nexport default Checkout;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"CheckoutForm\");\n$RefreshReg$(_c2, \"Checkout\");","map":{"version":3,"sources":["/Users/benaiahvarner/Documents/Ghost-Grits/frontendd/components/Checkout.js"],"names":["useState","CREATE_ORDER","CREATE_FIXED_ORDER_ITEM","CREATE_CUSTOM_ORDER_ITEM","DELETE_CUSTOM_ITEMS","DELETE_FIXED_ITEMS","useMutation","loadStripe","Elements","CardElement","useStripe","useElements","useRouter","CheckoutStyled","calcTotalPrice","Select","FontAwesomeIcon","faClock","faCalendar","useCart","stripeLib","process","env","NEXT_PUBLIC_STRIPE_KEY","CheckoutForm","fixedItems","customItems","closeCart","error","setError","loading","setLoading","firstName","lastName","email","orderForm","setOrderForm","checkoutOpen","setCheckoutOpen","deleteFixedItems","deleteCustomItems","createCustomOrderItem","createFixedOrderItem","createOrder","router","stripe","elements","handleChange","e","target","name","value","fixedPrices","foodPrice","allFoodCartItems","map","item","push","food","price","customPrices","saladPrice","allSaladCartItems","salad","fixedFoodPrice","reduce","tally","customFoodPrice","fixedOrderItem","key","orderItem","data","description","customOrderItem","choice_of_dressing","choice_of_two_toppings","convertFixedItems","variables","fixedOrder","convertCustomItems","customOrder","handleSubmit","preventDefault","createPaymentMethod","type","card","getElement","paymentMethod","charge","brand","funding","last4","customId","fixedId","createFixedOrderItems","id","createCustomOrderItems","total","order","deleteCustom","deleteFixed","ids","options","label","timeOptions","customStyles","dropdownIndicator","color","fontsize","option","control","border","borderRadius","display","placeholder","singleValue","message","Checkout"],"mappings":"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","sourcesContent":["import { useState } from 'react';\nimport {\n  CREATE_ORDER,\n  CREATE_FIXED_ORDER_ITEM,\n  CREATE_CUSTOM_ORDER_ITEM,\n  DELETE_CUSTOM_ITEMS,\n  DELETE_FIXED_ITEMS,\n} from './queries/orderQuerie';\nimport { useMutation } from '@apollo/client';\nimport { loadStripe } from '@stripe/stripe-js';\nimport {\n  Elements,\n  CardElement,\n  useStripe,\n  useElements,\n} from '@stripe/react-stripe-js';\nimport { useRouter } from 'next/router';\nimport { CheckoutStyled } from './styles/CheckoutStyled';\nimport { calcTotalPrice } from '../lib/calcTotalPrice';\nimport Select from 'react-select';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faClock } from '@fortawesome/free-solid-svg-icons';\nimport { faCalendar } from '@fortawesome/free-regular-svg-icons';\nimport {useCart} from '../lib/cartState';\n\nconst stripeLib = loadStripe(process.env.NEXT_PUBLIC_STRIPE_KEY);\n\nconst CheckoutForm = ({ fixedItems, customItems }) => {\n  const { closeCart } = useCart();\n  const [error, setError] = useState();\n  const [loading, setLoading] = useState(false);\n  const [orderForm, setOrderForm] = useState({\n    firstName: '',\n    lastName: '',\n    email: '',\n  });\n  const [checkoutOpen, setCheckoutOpen] = useState(false);\n  const [deleteFixedItems] = useMutation(DELETE_FIXED_ITEMS);\n  const [deleteCustomItems] = useMutation(DELETE_CUSTOM_ITEMS);\n  const [createCustomOrderItem] = useMutation(CREATE_CUSTOM_ORDER_ITEM);\n  const [createFixedOrderItem] = useMutation(CREATE_FIXED_ORDER_ITEM);\n  const [createOrder] = useMutation(CREATE_ORDER);\n\n  const router = useRouter();\n  const stripe = useStripe();\n  const elements = useElements();\n  const handleChange = (e) => {\n    setOrderForm({\n      ...orderForm,\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  const fixedPrices = [];\n  const foodPrice = () => {\n    fixedItems?.allFoodCartItems?.map((item) => {\n      fixedPrices.push(item.food.price);\n    });\n    return fixedPrices;\n  };\n\n  const customPrices = [];\n  const saladPrice = () => {\n    customItems?.allSaladCartItems?.map((item) => {\n      customPrices.push(item.salad.price);\n    });\n    return customPrices;\n  };\n\n  const fixedFoodPrice = foodPrice().reduce((tally, item) => tally + item, 0);\n  const customFoodPrice = saladPrice().reduce((tally, item) => tally + item, 0);\n\n  const fixedOrderItem = fixedItems?.allFoodCartItems?.map((item, key) => {\n    const orderItem = {\n      data: { name: item.food.name, description: item.food.description },\n    };\n    return orderItem;\n  });\n\n  const customOrderItem = customItems?.allSaladCartItems?.map((item, key) => {\n    const orderItem = {\n      data: {\n        name: item.salad.name,\n        description: item.salad.description,\n        choice_of_dressing: item.salad.choice_of_dressing,\n        choice_of_two_toppings: item.salad.choice_of_two_toppings,\n      },\n    };\n    return orderItem;\n  });\n\n  async function convertFixedItems() {\n    const fixedOrder = await createFixedOrderItem({\n      variables: {\n        fixedItems: fixedOrderItem,\n      },\n    });\n\n    return fixedOrder;\n  }\n\n  async function convertCustomItems() {\n    const customOrder = await createCustomOrderItem({\n      variables: {\n        customItems: customOrderItem,\n      },\n    });\n    return customOrder;\n  }\n\n  async function handleSubmit(e) {\n    e.preventDefault();\n    setLoading(true);\n    const { error, paymentMethod } = await stripe.createPaymentMethod({\n      type: 'card',\n      card: elements.getElement(CardElement),\n    });\n    if (error) {\n      setError(error);\n    }\n\n    const charge = `Brand: ${paymentMethod?.card?.brand}, Type: ${paymentMethod?.card?.funding}, Last 4 digits: ${paymentMethod?.card?.last4}`;\n\n    const { data: customOrder } = await convertCustomItems();\n    const { data: fixedOrder } = await convertFixedItems();\n\n    const customId = [];\n    const fixedId = [];\n\n    fixedOrder?.createFixedOrderItems?.map((item) => {\n      fixedId.push({ id: item.id });\n    });\n\n    customOrder?.createCustomOrderItems?.map((item) => {\n      customId.push({ id: item.id });\n    });\n\n    const { data: order } = await createOrder({\n      variables: {\n        fixedItems: fixedId,\n        customItems: customId,\n        firstName: orderForm.firstName,\n        lastName: orderForm.lastName,\n        email: orderForm.email,\n        charge,\n        total: fixedFoodPrice + customFoodPrice,\n      },\n    });\n\n    const deleteCustom = [];\n    const deleteFixed = [];\n\n    fixedItems?.allFoodCartItems?.map((item) => {\n      deleteFixed.push(item.id);\n    });\n    customItems?.allSaladCartItems?.map((item) => {\n      deleteCustom.push(item.id);\n    });\n\n    await deleteCustomItems({\n      variables: {\n        ids: deleteCustom,\n      },\n    });\n\n    await deleteFixedItems({\n      variables: {\n        ids: deleteFixed,\n      },\n    });\n\n    closeCart();\n    router.push(`/order/${order.createOrder.id}`);\n  }\n\n  const options = [\n    {label: 'Tue, April 20th', value: 'Tue, April 20th'},\n    {label: 'Wed, April 21st', value: 'Wed, April 21th'},\n    {label: 'Thur, April 22nd', value: 'Thur, April 22nd'},\n    {label: 'Fri, April 23rd', value: 'Fri, April 23rd'},\n  ]\n\n  const timeOptions = [\n    {label: '9:00 AM', value: '9:00 AM'},\n    {label: '10:00 AM', value: '10:00 AM'},\n    {label: '11:00 AM', value: '11:00 AM'},\n    {label: '12:00 AM', value: '12:00 AM'},\n    {label: '1:00 PM', value: '1:00 PM'},\n    {label: '2:00 PM', value: '2:00 PM'},\n    {label: '3:00 PM', value: '3:00 PM'},\n    {label: '4:00 PM', value: '4:00 PM'},\n    {label: '5:00 PM', value: '5:00 PM'},\n  ]\n\n  const customStyles = {\n    dropdownIndicator: () => ({\n      color: '#e5426c',\n      fontsize: '1rem'\n    }),\n    option: () => ({\n      color: '#e5426c'\n    }),\n    control: () => ({\n      border: '2px solid #e5426c',\n      borderRadius: '5px',\n      display: 'flex'\n    }),\n    placeholder: () => ({\n      color: '#e5426c'\n    }),\n    singleValue: () => ({\n      color: '#e5426c'\n    })\n  };\n\n  return (\n    <CheckoutStyled open={checkoutOpen}>\n      <button onClick={() => setCheckoutOpen(!checkoutOpen)} className='checkout-button'>{checkoutOpen ? 'Close' : 'Checkout'}</button>\n      <div className=\"orderDet\">\n        <div className=\"total-date\">\n          <div className=\"total\">\n            <h3>Order Subtotal:</h3>\n            <span>${calcTotalPrice(fixedItems, customItems)}</span>\n          </div>\n          <div className=\"date-time\">\n            <div className=\"select-container\">\n              <h3>\n                <FontAwesomeIcon className=\"icon\" icon={faCalendar} />\n                Pick Up Date\n              </h3>\n              <Select options={options} styles={customStyles} placeholder={'Tue, April 20th'} />\n            </div>\n            <div className=\"select-container\">\n              <h3>\n                <FontAwesomeIcon className=\"icon\" icon={faClock} />\n                Pick Up Time\n              </h3>\n              <Select options={timeOptions} styles={customStyles} placeholder={'9:00 AM'} />\n            </div>\n          </div>\n        </div>\n        <form onSubmit={handleSubmit}>\n          <div className=\"names\">\n            <input\n              placeholder=\"First Name\"\n              type=\"text\"\n              name=\"firstName\"\n              onChange={handleChange}\n              value={orderForm.firstName}\n            />\n            <input\n              placeholder=\"Last Name\"\n              type=\"text\"\n              name=\"lastName\"\n              onChange={handleChange}\n              value={orderForm.lastName}\n            />\n          </div>\n          <div className=\"email\">\n            <input\n              placeholder=\"Email Address\"\n              type=\"email\"\n              name=\"email\"\n              onChange={handleChange}\n              value={orderForm.email}\n            />\n          </div>\n          {error && <p>{error.message}</p>}\n          <CardElement className=\"card\" />\n          <button className='checkout-button'>Checkout Now</button>\n        </form>\n      </div>\n    </CheckoutStyled>\n  );\n};\n\nfunction Checkout({ fixedItems, customItems }) {\n  return (\n    <Elements stripe={stripeLib}>\n      <CheckoutForm fixedItems={fixedItems} customItems={customItems} />\n    </Elements>\n  );\n}\n\nexport default Checkout;\n"]},"metadata":{},"sourceType":"module"}